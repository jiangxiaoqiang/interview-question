\documentclass[../../../interview-questions.tex]{subfiles}

\begin{document}

\subsection{解决消息重复}

增加消息应用状态表（message\_apply），通俗来说就是个账本，用于记录消息的消费情况，每次来一个消息，在真正执行之前，先去消息应用状态表中查询一遍，如果找到说明是重复消息，丢弃即可，如果没找到才执行，同时插入到消息应用状态表（同一事务）。

\end{document}